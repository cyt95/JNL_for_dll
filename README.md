# JNL_for_dll

##### 목적
Java에서 dll을 불러오기 위함

##### 방법
1. Java에서 예제를 만든다.
  ==> 해당 예제에는 불러올 함수의 원형을 선언해야 한다.
  ```
  <<< JNI.java >>>
  public class JNI {
    static {
        System.loadLibrary("JNI");
    }

    private native int getNumber();
    private native void printHelloWorld();

    public static void main(String[] args){
        JNI jni = new JNI();


        jni.printHelloWorld(); //JNI로 호출 한 HelloWorld!

        System.out.println(jni.getNumber()); //JNI로 호출 한 숫자 메서드
    }
}
```

2. 자바 헤더파일을 생성한다. <br>
https://ashespia.tistory.com/38 <br>
```
  <<< JNI.h >>>
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class JNI */

#ifndef _Included_JNI
#define _Included_JNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     JNI
 * Method:    getNumber
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_JNI_getNumber
  (JNIEnv *, jobject);

/*
 * Class:     JNI
 * Method:    printHelloWorld
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_JNI_printHelloWorld
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif
```

3. VS에서 2번 헤더를 가지고 기능을 구현하고 dll을 생성한다. <br>
VS에서 자바 관련 디렉토리를 지정해야 함. <br>
```
  <<< sum.cpp >>>
#include "pch.h"
#include "JNI.h"
JNIEXPORT jint JNICALL Java_JNI_getNumber(JNIEnv *env, jobject jobj) {
	return 2020;
}

JNIEXPORT void JNICALL Java_JNI_printHelloWorld(JNIEnv *env, jobject jobj) {
	printf("Hello, My Name is Joshua.");
}
```

4. 빌드된 dll을 java 프로젝트 디렉토리에 이동시킨다.

##### 결과
cpp dll에서 구현한 printf의 출력 멘트와 숫자 2020을 가져온 모습입니다.
![image](https://user-images.githubusercontent.com/73207889/116646203-78269780-a9b2-11eb-93ea-f23a8cdb6a32.png)



##### 참고자료
[JNI] IntelliJ IDEA jni 헤더파일 (header file) javah 명령어 설정하기 <br>
출처: https://ashespia.tistory.com/38 [아직미정]

DLL(동적 연결 라이브러리) 만들어서 사용하기 <br>
https://blog.naver.com/PostView.nhn?blogId=tipsware&logNo=221359282016

[JNI] java에서 dll로드하기 <br>
https://rogiry.tistory.com/88

Java - JNI 사용하기 <br>
https://mommoo.tistory.com/71
